# 软件交付整体流程

随着软件的规模逐渐扩大，陆续的需求不断到来，一个团队内部统一的软件交付整体流程需要制定下来。

现在针对各个时间节点以及各个交付点的开发输出件进行描述。

> 开发周期：**每7个工作日**

## 需求例会（确认需求时）
上一个版本交付后的**第二天**就是开发和上游的需求例会。

需求例会主要有两个目的：
* 产品描述待做的需求，仔细阐明需求的细节。（要求开发在与会前都通读一遍对应的prd，先进行可行性评估，方便在会上讨论）
* 开发评估需求的工作量，和产品协商下一个迭代周期需要交付的内容。

下会之前需要明确好的内容：*新的需求需要在下一个交付日完成多少？高保真在什么时候提供？*

## 开发时
新需求的开发时，**要求每个需求的对应责任人，输出技术方案**。特别是规格类参数以及场景的处理。

针对前端和后端分别作不同的方案要求，输出的技术方案文档均需包含要求中的内容。

### 前端
1. 需要引入的新依赖。如我需要引入mobx来实现状态管理。
2. 各个页面之间的跳转逻辑，以及数据交互。类似于 ![img_v3_02dm_3f62a98d-98de-459c-8aa3-7d31e816593g.jpg](img_v3_02dm_3f62a98d-98de-459c-8aa3-7d31e816593g.jpg)
3. 状态之间的依赖关系。如什么情况下这个页面会有不同的展示形式，或者不同的跳转形式。各个页面的新增逻辑关系都需要从开发角度描述清楚。
4. 在现有代码框架中，需要添加的新文件，以及文件的对外接口的罗列。

### 后端
1. 涉及到数据流以及存储的时序图。
2. API文档以及请求格式。列出各个API的详细设计，包括请求方法、请求URL、请求参数、响应格式等。

| API | 方法 | URL | 请求参数 | 响应 | 备注 |
|-----|------|-----|----------|------|------|
| 获取用户信息 | GET | `/api/user/{id}` | `id: 用户ID` | `200: 用户信息` | - |

3. 如果对产品或者前端有约束，需要标注重点说明。

在代码管理上，现在针对不同的情况有下列约束：
* 上个需求的UI bug或者逻辑 bug，直接在main分支修改 - 对外的版本统一在main分支出
* 新需求在新的特性分支上合作，待完成后再回合到main分支 - 产品验收后才可以回合main分支

## 交付时
距离上一次需求会的第7个工作日，当天一定会发正式版本。这个步骤以后再描述如何自动化进行。

eas build前置步骤（开发完成后）

1. 和其他人确认git上是最终版代码，修改版本号，bundle号
2. yarn ios --mode Release / yarn android --mode Release 测试release包，全面测试（叫UI一起）
3. build，给UI和产品测试
4. 确认没问题的情况下submit

## UI bug期
正常来说这一步是不应该存在的，但是由于我们刚开始节奏很紧凑，UI的改动会很大。所以我们当前采取轮班制来修复[UI文档](https://zin8ujy4xk2.feishu.cn/base/Enz2bnuLlaQqV3saxsOcsFwYnDg)中提到的问题。

每天轮到的人都需要在开发视图中选择好一定的当天需要修复的问题。修复完后，自己出包给萝蕤回归问题。

出包指令：
<code-block>
eas build -p android // 正常来说只需要出这个来回归UI问题
eas build -p ios
</code-block>

_**注意不能够在座位上验收，要用包的形式**_。